<html>
<head>
<title>City Finder</title>

<script  src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<script>

    /*global $*/
    $(document).ready(function() {
        
        //sets up daily NASA picture as background image
        var apiKey = "tWFdzns2p2oC3vwYBoHZX8yX0dWqrosxpAnCAbcL";
        var myurl = "https://api.nasa.gov/planetary/apod?api_key="+ apiKey;
        // myurl += cityValue;
        console.log("nasa API url: " + myurl);
         $.ajax({
                url : myurl,
                dataType : "json",
                success : function(data) {
                    console.log(data);
                    var APODimage = data['hdurl'];
                    $("body").css("background-image", "url('" + APODimage + "')")
                }
            });
        
        
        //get list button is clicked, gets list of near-earth objects in the date range specified
        $("#submit").click(function(e){
            var month = $("#month").val();
            var day = $("#day").val();
            var year = $("#year").val();
            e.preventDefault();
            
            //create api call url
            var apiKey = "tWFdzns2p2oC3vwYBoHZX8yX0dWqrosxpAnCAbcL";
            var myurl = "https://api.nasa.gov/neo/rest/v1/feed?start_date=" + year +"-" +
                month + "-" + day + "&api_key="+ apiKey;
            console.log("object list API: " + myurl);
            
            $.ajax({
                url : myurl,
                dataType : "json",
                success : function(data) {
                    console.log(data);
                    var objectList = data['hdurl'];
                }
            });
        });
    });
</script>

<style type="text/css">
    body{
        background-repeat: no-repeat;
        background-attachment: fixed;
        font-family: Avantgarde, TeX Gyre Adventor, URW Gothic L, sans-serif;
    }
    #backgroundDiv {
        margin: 3em;
        padding: 2em;
        background-color: white;
        opacity: 0.7;
        border-radius: 25px;
    }
    h1{
        text-align: center;
    }
    
</style>

</head>
    <body>
        <div id="backgroundDiv">
        <h1>Find Near Earth Objects</h1>
        <br><br>
        
        <div>
          <form action="/action_page.php">
            <label for="month">Month</label>
            <select id="month" name="monthField">
                <option value = "01">January</option>
                <option value = "02">February</option>
                <option value = "03">March</option>
                <option value = "04">April</option>
                <option value = "05">May</option>
                <option value = "06">June</option>
                <option value = "07">July</option>
                <option value = "08">August</option>
                <option value = "09">September</option>
                <option value = "10">October</option>
                <option value = "11">November</option>
                <option value = "12">December</option>
            </select>
            
        
            <label for="day">Day</label>
            <input type="number" id="day" name="dayField" placeholder="Day" min="1" max="31">
        
            <label for="year">Year</label>
            <input type="number" id="year" name="yearField" placeholder="Year" min="1900" max="2200">
            
            <button id="submit" value="Submit">Submit</button>
          </form>
        </div>
        
    </body>
</html>
